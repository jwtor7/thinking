<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Thinking Monitor - Claude Code</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <h1 class="header-title">THINKING MONITOR</h1>
      <div class="header-controls">
        <span id="connection-status" class="status status-disconnected">
          <span class="status-dot"></span>
          <span class="status-text">Disconnected</span>
        </span>
        <button id="clear-btn" class="btn btn-secondary" title="Clear all panels">
          Clear
        </button>
        <label class="toggle">
          <input type="checkbox" id="auto-scroll" checked>
          <span class="toggle-label">Auto-scroll</span>
        </label>
      </div>
    </header>

    <!-- Agent Bar -->
    <nav class="agent-bar" id="agent-bar">
      <span class="agent-bar-label">AGENTS:</span>
      <div class="agent-tabs" id="agent-tabs">
        <button class="agent-tab active" data-agent="all">
          <span class="agent-dot agent-dot-all"></span>
          All
          <span class="agent-tab-shortcut">0</span>
        </button>
        <!-- Agent tabs will be added dynamically -->
      </div>
    </nav>

    <!-- Main Content - 4 Panel Layout -->
    <main class="panels">
      <!-- Left Column -->
      <div class="panel-column">
        <!-- Thinking Panel -->
        <section class="panel panel-thinking">
          <header class="panel-header">
            <h2 class="panel-title">THINKING</h2>
            <div class="panel-header-controls">
              <div class="panel-filter">
                <input type="text" class="panel-filter-input" id="thinking-filter" placeholder="Filter..." aria-label="Filter thinking entries">
                <button class="panel-filter-clear panel-filter-hidden" id="thinking-filter-clear" aria-label="Clear filter">x</button>
              </div>
              <span class="panel-badge" id="thinking-count">0</span>
            </div>
          </header>
          <div class="panel-content" id="thinking-content">
            <div class="empty-state">
              <span class="empty-icon">brain</span>
              <p>Waiting for thinking content...</p>
            </div>
          </div>
        </section>

        <!-- Agent Tree Panel -->
        <section class="panel panel-agents">
          <header class="panel-header">
            <h2 class="panel-title">AGENT TREE</h2>
            <span class="panel-badge" id="agents-count">0</span>
          </header>
          <div class="panel-content" id="agents-content">
            <div class="empty-state">
              <span class="empty-icon">users</span>
              <p>No active agents</p>
            </div>
          </div>
        </section>
      </div>

      <!-- Right Column -->
      <div class="panel-column">
        <!-- Tool Activity Panel -->
        <section class="panel panel-tools">
          <header class="panel-header">
            <h2 class="panel-title">TOOL ACTIVITY</h2>
            <div class="panel-header-controls">
              <div class="panel-filter">
                <input type="text" class="panel-filter-input" id="tools-filter" placeholder="Filter..." aria-label="Filter tool entries">
                <button class="panel-filter-clear panel-filter-hidden" id="tools-filter-clear" aria-label="Clear filter">x</button>
              </div>
              <span class="panel-badge" id="tools-count">0</span>
            </div>
          </header>
          <div class="panel-content" id="tools-content">
            <div class="empty-state">
              <span class="empty-icon">wrench</span>
              <p>No tool activity yet</p>
            </div>
          </div>
        </section>

        <!-- Plan Panel -->
        <section class="panel panel-plan">
          <header class="panel-header">
            <h2 class="panel-title">PLAN <span class="plan-scope-badge" title="Plans are workspace-level files shared across all sessions">workspace</span></h2>
            <div class="panel-header-controls">
              <div class="plan-actions">
                <button class="plan-action-btn" id="plan-open-btn" title="Open in Default App (Cmd+O)" aria-label="Open in Default App" disabled>
                  <span class="plan-action-icon">&#128196;</span>
                </button>
                <button class="plan-action-btn" id="plan-reveal-btn" title="Reveal in Finder (Cmd+Shift+R)" aria-label="Reveal in Finder" disabled>
                  <span class="plan-action-icon">&#128193;</span>
                </button>
              </div>
              <div class="plan-selector-wrapper">
                <button class="plan-selector-btn" id="plan-selector-btn" aria-haspopup="listbox" aria-expanded="false" title="Select a plan file">
                  <span class="plan-selector-text" id="plan-selector-text">No active plan</span>
                  <span class="plan-selector-arrow">&#9662;</span>
                </button>
                <ul class="plan-selector-dropdown" id="plan-selector-dropdown" role="listbox" aria-label="Available plans">
                  <!-- Plan options will be added dynamically -->
                </ul>
              </div>
            </div>
          </header>
          <div class="plan-meta" id="plan-meta">
            <!-- Plan metadata (last modified, etc.) will be added dynamically -->
          </div>
          <div class="panel-content" id="plan-content">
            <div class="empty-state">
              <span class="empty-icon">file</span>
              <p>No plan file loaded</p>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Connection Overlay -->
    <div class="connection-overlay" id="connection-overlay">
      <div class="connection-overlay-content">
        <div class="connection-overlay-icon">...</div>
        <h2 class="connection-overlay-title">Connecting to Server</h2>
        <p class="connection-overlay-message" id="connection-overlay-message">Attempting to connect...</p>
        <button class="connection-overlay-retry" id="connection-overlay-retry">Retry Now</button>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <span id="server-info">Server: --</span>
      <span class="keyboard-hints">
        <kbd>a</kbd><kbd>t</kbd><kbd>o</kbd><kbd>g</kbd><kbd>p</kbd> views
        <kbd>0-9</kbd> agents
        <kbd>c</kbd> clear
        <kbd>s</kbd> scroll
        <kbd>/</kbd> search
      </span>
      <span id="event-count">Events: 0</span>
    </footer>
  </div>

  <!-- Plan Context Menu -->
  <div class="plan-context-menu" id="plan-context-menu" role="menu" aria-label="Plan actions">
    <button class="plan-context-menu-item" id="context-menu-open" role="menuitem">
      <span class="plan-context-menu-icon">&#128196;</span>
      Open in Default App
    </button>
    <button class="plan-context-menu-item" id="context-menu-reveal" role="menuitem">
      <span class="plan-context-menu-icon">&#128193;</span>
      Reveal in Finder
    </button>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
